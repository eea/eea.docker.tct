{% extends 'layout.html' %}

{% load i18n %}

{% block content %}

{% include 'admin_nav_tabs.html' %}

<ul class="breadcrumb">
  <li>
    <a href="{% url 'list_national_objectives' %}">{% trans "Objectives" %}</a>
    <span class="divider">/</span>
  </li>
  <li>
    <a href="{% url 'view_national_objective' pk=objective.pk %}">{% trans "Objective" %} {{ objective.pk }}</a>
    <span class="divider">/</span>
  </li>
  <li class="active">{% trans "View action" %} {{ action.code }}</li>
</ul>

<h1 class="small">{% trans "Action" %} {{ action.code }}: {{ action.title }}</h1>

<div class="btn-toolbar">
  <div class="btn-group">

    <a class="btn btn-success btn-small"
       href="{% url 'view_national_objective' pk=objective.pk %}">
       <i class="icon-white icon-arrow-left"></i> {% trans "Back" %}</a>

    <a class="btn edit btn-small"
       href="{% url 'edit_national_action' objective=objective.pk pk=action.pk %}">{% trans "Edit" %}</a>

    <a class="btn btn-danger edit btn-small">
       <i class="icon-white icon-trash"></i> {% trans "Delete" %}</a>
  </div>
</div>

<div class="admin-obj-description">
  {{ action.description|safe }}
</div>


{% endblock %}

{% block scripts %}
<script>
  $(function () {
    $('.messages').delay(1000).fadeOut();
  });

  $(".btn-danger").on("click", function (e) {
    e.preventDefault();
    if(confirm('Are you sure you want to delete this action?')) {
      $.ajax({
        "url": $(this).attr("href"),
        "type": "DELETE",
        "success": function (data) {
        window.location = "{% url 'delete_national_action' objective=objective.pk pk=action.pk %}";
        }
      });
    }
  });

</script>
{% endblock scripts %}

